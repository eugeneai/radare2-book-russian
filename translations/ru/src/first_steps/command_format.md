## Формат команды

Общий формат команд radiuse2 выглядит следующим образом:
```
[.][times][cmd][~grep][@[@iter]addr!size][|>pipe] ;
```
Программисты, часто использующие Vim и знакомые с его командами, чувствуют теперь себя как дома. Этот формат используется на протяжении всей книги. Команды обозначаются одним символом [a-zA-Z], регистр учитывается.

Чтобы выполнить команду несколько раз, надо добавить к ней префикс с номером:
```
px    # выполнить px
3px   # выполнить px три раза
```

Префикс `!` используется для выполнения команды в оболочке операционной системы. If you want to use the cmd callback from the I/O plugin you must prefix with `=!`.

Обратите внимание, что один восклицательный знак запускает команду и распечатывает вывод через API RCons. Выполнение будет с блокировкой radare, интерактивный режим не будет работать. Двойные восклицательные знаки `!!` служат для запуска стандартных системных вызовов.

Все сокетные, файловые и исполнительные API можно контролировать (ограничивать) с помощью переменной конфигурации `cfg.sandbox`.

Примеры:
```
ds                    ; вызоа команды отладчика 'step'
px 200 @ esp          ; показать 200 байт по адресу в регистре esp
pc > file.c           ; выдать в файл file.c буфер в виде массива байтов на языке C
wx 90 @@ sym.*        ; записать инструкцию nop по адресу каждого символа
pd 2000 | grep eax    ; отфильтровать grep-ом коды инструкций, использующие регистр 'eax'
px 20 ; pd 3 ; px 40  ; несколько команд в одной строке
```

Стандартный канал UNIX `|` также доступен в программе radare2. Он используется для фильтрации вывода команд r2 внешней программой, способной считывать со стандартного ввода, например, `grep`, `less`, `wc`. Если нет необходимости создавать лишние процессы, или это по какой-то причине невозможно, или же в оперативной системе нет необходимых вам инструментов UNIX (например, вы в Windows или используете встроенное приложение), вам доступен встроенный grep (`~`).

Используйте `~?` для детальной документации команды.

Команда-фильтр `~` подобно grep используется для фильтрации вывода любой другой команды:
```
pd 20~call            ; дизассемблировать 20 инструкций, и отфильтровать grep-ом строки с 'call'
```
Кроме того, можно получать grep-ом строки и столбцы по номерам:
```
pd 20~call:0          ; первая строка
pd 20~call:1          ; вторая строка
pd 20~call[0]         ; первая колонка
pd 20~call[1]         ; вторая колонка
```
Или даже комбинировать такие запросы:
```
pd 20~call:0[0]       ; отфильтровать grep-ом первую колонку первой строки, где встречается 'call'
```
Внутренняя функция grep является ключевой при создании сценариев radare2,
 она может использоваться для организации перебора списка смещений или данных, сгенерированных дизассемблером,
 диапазонов, или вывода других команд. Узнать об этом больше можно, изучив раздел [Итераторы](../scripting/loops.md).

Символ `@` используется для указания параметра - адреса смещения для команды, которая записана в строке слева от него.
После исполнения команды в такой форме, исходный адрес восстанавливается.

Например, `pd 5 @ 0x100000fce` дизассемблирует пять инструкций по адресу 0x100000fce.

Большинство команд поддерживают автодополнение по клавише `<TAB>`, например, `s`eek или `f`lags.
Автодополнение позволяет просмотреть все возможные варианты, в данном случае, имена флагов.
Можно просмотреть историю команд
 с помощью команды `!~...`, она в визуальном режиме прокручивает список выполненных ранее команд radare2.

Также можно расширить объем предлагаемых в автодополнении вариантов до обработки большего из количества, а также включить автодополнение для ваших собственных команд, определенных в ядре, плагинах ввода-вывода. Вот эта команда - `!!!`.
