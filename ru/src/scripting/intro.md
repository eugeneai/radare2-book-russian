## Скрипты

Radare2 предоставляет широкий набор функций для автоматизации "буровых работ".
Он варьируется от простой последовательности команд до вызова скриптов/программы через IPC (межпроцессное взаимодействие), называемое r2pipe.

Как уже упоминалось несколько раз, есть возможность писать последовательности команды, используя знак `;`.
```
[0x00404800]> pd 1 ; ao 1
           0x00404800      b827e66100     mov eax, 0x61e627      ; "tab"
address: 0x404800
opcode: mov eax, 0x61e627
prefix: 0
bytes: b827e66100
ptr: 0x0061e627
refptr: 0
size: 5
type: mov
esil: 6415911,rax,=
stack: null
family: cpu
[0x00404800]>
```
Такая форма просто запускает вторую команду после завершения первой, как в командной строке ОС.

Второй важный способ создать последовательность команд — использовать простой канал `|`.
```
адрес ao|grep
```
Обратите внимание, сто `|` может передавать вывод команд r2 только во внешнюю команду оболочки или в другую программу.
Существует аналогичный способ перечислять команды r2 с использованием оператора обратной кавычки `` `команда` ``. Часть в кавычках подвергнется подстановке команд, а вывод будет использоваться в качестве аргумента командной строки.

Например, мы хотим увидеть несколько байтов памяти по указанному адресу, на который ссылаются инструкции 'mov eax, addr'. Можно сделать это, не переходя к нему, используя последовательность команд:
```
[0x00404800]> pd 1
              0x00404800      b827e66100     mov eax, 0x61e627      ; "tab"
[0x00404800]> ao
address: 0x404800
opcode: mov eax, 0x61e627
prefix: 0
bytes: b827e66100
ptr: 0x0061e627
refptr: 0
size: 5
type: mov
esil: 6415911,rax,=
stack: null
family: cpu
[0x00404800]> ao~ptr[1]
0x0061e627
0
[0x00404800]> px 10 @ `ao~ptr[1]`
- offset -   0 1  2 3  4 5  6 7  8 9  A B  C D  E F  0123456789ABCDEF
0x0061e627  7461 6200 2e69 6e74 6572                 tab..inter
[0x00404800]>
```
Можно перенаправить вывод команды r2 в файл, используя `>` а также `>>`.
```
[0x00404800]> px 10 @ `ao~ptr[1]` > example.txt
[0x00404800]> px 10 @ `ao~ptr[1]` >> example.txt
```

Radare2 также предоставляет довольно много команд обработки файлов типа Unix, таких как head, tail, cat, grep и многие другие. Одна из таких команд - [Uniq](https://en.wikipedia.org/wiki/Uniq), которую можно использовать для фильтрации и отображения только неповторяющегося содержимого. Итак, чтобы создать новый файл только с уникальными строками, вы можете сделать:
```
[0x00404800]> uniq file > uniq_file
```

Команда [head](https://en.wikipedia.org/wiki/Head_%28Unix%29) может использоваться для просмотра первых N строк в файле, аналогично [tail](https://en.wikipedia.org/wiki/Tail_(Unix)), позволяющих видеть последние N строк.
```
[0x00404800]> head 3 foodtypes.txt
1 Protein
2 Carbohydrate
3 Fat
[0x00404800]> tail 2 foodtypes.txt
3 Shake
4 Milk
```

Команда [join](https://en.wikipedia.org/wiki/Join_%28Unix%29) может использоваться для объединения двух разных файлов с общим первым полем.
```
[0x00404800]> cat foodtypes.txt
1 Protein
2 Carbohydrate
3 Fat
[0x00404800]> cat foods.txt
1 Cheese
2 Potato
3 Butter
[0x00404800]> join foodtypes foods.txt
1 Protein Cheese
2 Carbohydrate Potato
3 Fat Butter
```

Точно так же сортировка контента также возможна с помощью команды [sort](https://en.wikipedia.org/wiki/Sort_%28Unix%29). Типичный пример:
```
[0x00404800]> sort file
eleven
five
five
great
one
one
radare
```

Команда `?$?` предоставляет информацию о нескольких полезных переменных, похожих на переменные `$v` "immediate value" и `$m` ссылка на память из оп-кода.


