# Dietline

Radare2 поставляется с [readline](https://en.wikipedia.org/wiki/GNU_Readline)-подобной командной строкой ввода, реализованная на основе "бережливого" принципа навигации по истории команд и редактирования содержимого. Она позволяет пользователям передвигать курсор, перебирать предыдущие команды, обеспечивает автодополнение. Благодаря портативности Radare2, Dietline обеспечивает единый пользовательский интерфейс для всех поддерживаемых платформ. Интерфейс используется во всех подоболочках Rarade2: в основной командной строке, оболочке SDB, визуальных подсказках и подсказках адреса смещения. Также реализованы наиболее распространенные функции и сочетания клавиш, совместимые с GNU Readline.

Dietline поддерживает два основных режима конфигурации: режимы Emacs и Vi. Он также поддерживает знаменитый `Ctrl-R`, обратный поиск по истории. Клавиша `TAB` позволяет прокручивать варианты автодополнения.

# Автодополнение

В каждой оболочке и Radare2 поддерживается автодополнение команд. Есть несколько режимов — файлы, флаги и ключи/пространства имен SDB. Простой способ выбора возможных вариантов завершения — прокручиваемый всплывающий виджет. Он включается с помощью `scr.prompt.popup`, просто установите его в `true`.

# Режим Emacs (по умолчанию)

По умолчанию режим dietline совместим с привязками клавиш режима readline, подобного Emacs. Таким образом, активны:

## Перемещение
- `Ctrl-a` - перейти в начало строки,
- `Ctrl-e` - перейти в конец строки,
- `Ctrl-b` - переместиться на один символ назад,
- `Ctrl-f` - переместиться на один символ вперед.

## Удаление
- `Ctrl-w` - удалить предыдущее слово,
- `Ctrl-u` - удалить всю линию,
- `Ctrl-h` - удалить символ слева,
- `Ctrl-d` - удалить символ справа,
- `Alt-d` - удалить символ после курсора.

## Killing and Yanking
- `Ctrl-k` - удалить текст с текущей точки до конца строки,
- `Ctrl-x` - удалить текст с начала строки до текущей позиции,
- `Ctrl-t` - удалить от текущей точки до конца текущего слова, а если позиция находиться между словами, то до конца следующего слова.
- `Ctrl-w` - удалить часть слова левее от текущей позиции, используя пробел в качестве ограничителя. Удаленная часть сохраняется в специальный буфер,
- `Ctrl-y` - вытащить из буфера удаленных строк и поместить в текущую позицию,
- `Ctrl-]` - сдвинуть буфер на одну позицию, и вытащить оттуда новую строку. Вращение можно делать только если предыдущая команда была yank или yank-pop.

## История
- `Ctrl-r` - поиск в обратном направлении в истории.

# Режим Vi

Radare2 также настраивается на режим vi, подключаемый при помощи `scr.prompt.vi`. В этом режиме доступны сочетания клавиш:

## Вход в командные режимы
- `ESC` - вход в режим управления,
- `i` - вход в режим вставки.

## Перемещение
- `j` - выполняет функцию стрелки вверх,
- `k` - выполняет функцию стрелки вниз,
- `a` - переместить курсор вперед и перейти в режим вставки,
- `I` - перейти в начало строки и перейти в режим вставки,
- `A` - перейти в конец строки и перейти в режим вставки,
- `^` - перейти в начало строки,
- `0` - перейти в начало строки,
- `$` - перейти в конец строки,
- `h` - передвинуться на одну позицию назад,
- `l` - передвинуться на одну позицию вперед.

## Удаление и вставка
- `x` - вырезает символ,
- `dw` - удалить текущее слово,
- `diw` - удалить текущее слово,
- `db` - удалить предыдущее слово,
- `D` - удалить строку целиком,
- `dh` - удалить символ слева,
- `dl` - удалить символ справа,
- `d$` - удалить текст от текущей позиции до конца строки,
- `d^` - удалить текст от текущей позиции до начала строки,
- `de` - удалить текст от текущей позиции до конца слова, а если позиция находиться между словами, то до конца следующего слова.
- `p` - вытащить из буфера удаленных строк и поместить в текущую позицию,
- `c` - работают аналогично командам группы d, но переходит в режим вставки в конце операции, если перед командой вставить число, то команда будет выполнена несколько раз.

Если непонятно, в каком режиме vi вы находитесь, установите `scr.prompt.mode=true`, при этом будет происходить обновление цвета командной строки в зависимости от режима vi.
