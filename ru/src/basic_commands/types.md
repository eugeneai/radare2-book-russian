## Работа с типами данных

В Radare2 можно манипулировать типами данных: использовать стандартные типы данных C или определять собственные при помощи языка, сходного с C. В настоящее время существует поддержка структур, юнионов, сигнатур функций и перечислений.

```
[0x00000000]> t?
Usage: t   # команды, связанные с типами, представленными в cparse
| t                          Перечислить все загруженные типы
| tj                         Перечислить все загруженные типы в формате json
| t <type>                   Представить тип в синтаксисе команды 'pf'
| t*                         Показать информацию о типах в виде команд r2
| t- <name>                  Удалить тип по его имени
| t-*                        Удалить все типы
| tail [filename]            Вывести последнюю часть файла
| tc [type.name]             Перечислить все/заданные типы в формате C
| te[?]                      Перечислить все загруженные enum-ы
| td[?] <string>             Загрузить типы из строки
| tf                         Перечислить все загруженные сигнатуры функций
| tk <sdb-query>             Выполнить запрос к базе данных sdb
| tl[?]                      Показать привязку или привязать тип к адресу
| tn[?] [-][addr]            управление атрибутами и пометками noreturn-функций
| to -                       Открыть cfg.editor для загрузки типов
| to <path>                  Загрузить типы из заголовочного файла C
| toe [type.name]            Открыть cfg.editor для редактирования определений типов
| tos <path>                 Загрузить типы из текстового представления базы данных sdb
| tp  <type> [addr|varname]  Выполнить преобразование типа (cast) по <addr> к <type> и вывести результат (XXX: тип может включать пробелы)
| tpv <type> @ [value]       Показать значение по заданному адресу, если оно было бы заданного типа
| tpx <type> <hexpairs>      Показать значение заданного типа для перечисленных данных, представленных в виде шестнадцатеричного кода (XXX: тип может включать пробелы)
| ts[?]                      Показать перечень загруженных типов струкутур
| tu[?]                      Показать перечень загруженных типов юниунов
| tx[f?]                     Перечислить перекресные ссылки (xrefs)
| tt[?]                      Показать перечень загруженных typedef-ов
```

### Определение новых типов

Существует три различных метода определения новых типов:

1. Определение нового типа из оболочки r2 - используйте команду `td`, а всю строку возьмите в двойные кавычками. Например:

```
"td struct person {int age; char *name; char *address;};"
```

2. Также можно использовать `to -`, чтобы открыть текстовый редактор для представления требуемых типов. Редактор удобен, если надо задать слишком много типов.

3. Radare2 также поддерживает загрузку заголовочных файлов С при помощи команды `to`, путь к `.h`-файлу - параметр команды.

Можно просматривать загруженные типы в r2, используя `ts` для структур, `tu` для юнионов, `tf` для сигнатур функций, `te` для перечислений (enum).

Также можно преобразовывать (cast) указатели в типы данных и затем просматривать данные - команда `tp`. Пример:

```
[0x00400511]> tp person = 0x7fff170a46b0
       age : 0x7fff170a46b0 = 20
       name : (*0x4005b0) 0x7fff170a46b4 = My name
       address : (*0x4005b8) 0x7fff170a46bc = My age
[0x00400511]>
```
