# Соглашения вызова функции

Radare2 использует предположения о соглашении о вызове в процессе анализа функции для распознавания формальных аргументов функции. На основе предположения производится вывод типа возвращаемого значения.

```
[0x00000000]> afc?
|Usage: afc[agl?]
| afc convention  Задать вручную соглашение о вызове для текущей функции
| afc             Вывести соглашение о вызове для текущей функции
| afc=([cctype])  Выбрать/показать соглашение о вызове по умолчанию
| afcr[j]         Показать распределение регистров по параметрам
| afca            Анализировать функцию с целью определения соглащения о вызове для текущей функции
| afcf[j] [name]  Вывести тип возвращаемого значения function(arg1, arg2...), смотрите afij
| afck            Перечислить детали SDB для вызова для загруженных соглашений о вызове
| afcl            Перечислить все поддерживаемые соглашения о вызове
| afco path       Открыть профиль sdb для соглашения о вызове из файла
| afcR            Зарегистрировать телескопирование (telescoping), используя порядок соглашений о вызовах
[0x00000000]>
```

* Вывод списка всех доступных соглашений о вызовах для текущей архитектуры - команда `afcl`.

```
[0x00000000]> afcl
amd64
ms
```
* Для отображения прототипа функции стандартной библиотеки есть команда `afcf`.

```
[0x00000000]> afcf printf
int printf(const char *format)
[0x00000000]> afcf fgets
char *fgets(char *s, int size, FILE *stream)
```

Вся эта информация загружается через sdb в `/libr/anal/d/cc-[arch]-[bits].sdb`

```
default.cc=amd64

ms=cc
cc.ms.name=ms
cc.ms.arg1=rcx
cc.ms.arg2=rdx
cc.ms.arg3=r8
cc.ms.arg3=r9
cc.ms.argn=stack
cc.ms.ret=rax
```

`cc.x.argi=rax` используется для задания i-го аргумента функции, регистрации имени `rax`,

`cc.x.argn=stack` означает, что все аргументы (или остальные аргументы в случае наличия argi для любого i) будут храниться в стеке слева направо,

`cc.x.argn=stack_rev` то же, что `и cc.x.argn=stack`, но аргументы передаются справа налево.
