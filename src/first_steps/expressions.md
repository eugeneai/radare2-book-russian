## Выражения

Выражение — это математическое представление 64-битных числовых значений.
Результаты выражений отображаются в разных форматах, сравниваются и могут быть использованы со всеми командами, принимающими числовые аргументы. Выражения используют традиционные арифметические операции,
 а также двоичные и логические значения.
Чтобы вычислить математическое выражение в команде, надо добавить к ней `?`:
```
[0xb7f9d810]> ?vi 0x8048000
134512640
[0xv7f9d810]> ?vi 0x8048000+34
134512674
[0xb7f9d810]> ?vi 0x8048000+0x34
134512692
[0xb7f9d810]> ? 1+2+3-4*3
hex     0xfffffffffffffffa
octal   01777777777777777777772
unit    17179869184.0G
segment fffff000:0ffa
int64   -6
string  "\xfa\xff\xff\xff\xff\xff\xff\xff"
binary  0b1111111111111111111111111111111111111111111111111111111111111010
fvalue: -6.0
float:  nanf
double: nan
trits   0t11112220022122120101211020120210210211201
```
Поддерживаемые арифметические операции:

* \+ : сумма
* \- : вычитание
* \* : умножение
* / : деление
* % : остаток от деления по модулю
* \>> : сдвиг вправо
* << : сдвиг влево

```
[0x00000000]> ?vi 1+2+3
6
```

При использовании двоичного ИЛИ, всю команду следует заключать в кавычки, иначе выполнится связывание потоков `|`:
```
[0x00000000]> "? 1 | 2"
hex     0x3
octal   03
unit    3
segment 0000:0003
int32   3
string  "\x03"
binary  0b00000011
fvalue: 2.0
float:  0.000000f
double: 0.000000
trits   0t10
```

Числа могут отображаться в одном из следующих форматов:
```
0x033   : шеснадцатеричное число просто отображается
3334    : десятичное
sym.fo  : преобразуется в смещение флага
10K     : килобайты (KBytes) 10*1024
10M     : мегабайты (MBytes) 10*1024*1024
```

Также можно использовать переменные и адреса, включая текущий, при построении сложных выражений.

Последовательность символов `?$?` выдает список всех доступных команд. Можно также ознакомиться с кратким перечнем команд в конце книги.

```
$$    here (текущий виртуальный адрес, смещение)
$l    длина кода инструкции (opcode length)
$s    Размер файла
$j    адрес перехода (например, jmp 0x10, jz 0x10 => 0x10)
$f    адрес перехода, если ложь (например, jz 0x10 => адрес следующей инструкции)
$m    ссылка на адрес памяти, выраженна кодом инструкции (opcode) (например, mov eax,[0x10] => 0x10)
$b    размер блока
```

Еще несколько примеров:
```
[0x4A13B8C0]> ? $m + $l
140293837812900 0x7f98b45df4a4 03771426427372244 130658.0G 8b45d000:04a4 140293837812900 10100100 140293837812900.0 -0.000000
```
```
[0x4A13B8C0]> pd 1 @ +$l
0x4A13B8C2   call 0x4a13c000
```
